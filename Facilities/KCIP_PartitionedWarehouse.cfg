// ********
// DEPRECATED. WILL BE REMOVED UPON NEXT MAJOR UPDATE.
// The more elegant solution of adjustable production limits on Mining/Resource Refinement
// has been added to KC. This facility is no longer necessary
// ********
// Partitioned storage is necessary for fully automatic production lines in KC at the current state,
// as Production facilities and Mining facilities do not have a production threshold to stop
// and lower limit to restart its process. Therefore, overproduction will fill any mixed storage eventually.
// With partitioned storage, production lines with one main product and no side products can be fully
// automated. In combination with flare stack, side products can be voided, and more recipes can be
// fully automated.
// Caveat: currently if you lock your mixed storage and all the rest are partitioned, any resources that won't
// fit due to full storage and/or not in the list will be voided. So your Mining drill on auto-retrieve 
// will not stop producing. Good thing is you no longer needs a flare stack for it, but this is subject to how KC 
// handles resource storage in the future.
// Caveat: You might need to lock all storage, even partitioned ones, if you noticed that resource not going into the
// the partitioned storage and your mixed storages are locked. This should force the resouce to go into the correct one.
// After that, you can release the lock except any mixed storages.

// Partitioned Warehouse template
// No upgrade to keep the generated MM cache as short as possible
// If you need more storage of a certain resource, build a new facility
KCFacilityConfig
{
    name = KCIPPartitionedWarehouseOre
    displayName = Partitioned Warehouse - Ore
    type = KCStorageFacility
	category = Partitioned Storage
    level
    {
        0
        {
            basegroupName = KCIP_PWH_0
            resources { RocketParts = 200 }
            upgradeTime = 200
            maxVolume = 250000
			resourceWhitelist = Ore
			range = 2299
			hidden = true
			
			techNodes:NEEDS[!CommunityTechTree] = advConstruction
			techNodes:NEEDS[CommunityTechTree] = storageTech
			description = Partitioned solid storage.  See name for whitelisted resource.
			manufacturer = KCIP
        }
    }
}

// There is no B9PartSwitch-like thing in KC, so currently the only way to do partitioned storage is to create 
// one facility for each resources. Your MM cache is about to get very very large with CRP installed.
// Not all resources are currently added. Only those most "frequently" used.
// EL
+KCFacilityConfig[KCIPPartitionedWarehouseOre]
{
	@name = KCIPPartitionedWarehouseRocketParts
	@displayName = Partitioned Warehouse - RocketParts
	@level{@0{@resourceWhitelist = RocketParts}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]
{
	@name = KCIPPartitionedWarehouseScrapMetal
	@displayName = Partitioned Warehouse - ScrapMetal
	@level{@0{@resourceWhitelist = ScrapMetal}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[!KolonyTools,!RationalResourcesELUtilities]
{
	@name = KCIPPartitionedWarehouseMetal
	@displayName = Partitioned Warehouse - Metal
	@level{@0{@resourceWhitelist = Metal}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools,RationalResourcesELUtilities]
{
	@name = KCIPPartitionedWarehouseMetals
	@displayName = Partitioned Warehouse - Metals
	@level{@0{@resourceWhitelist = Metals}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[!KolonyTools,!RationalResourcesELUtilities]
{
	@name = KCIPPartitionedWarehouseMetalOre
	@displayName = Partitioned Warehouse - MetalOre
	@level{@0{@resourceWhitelist = MetalOre}}
}
// CRP
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseMetallicOre
	@displayName = Partitioned Warehouse - MetallicOre
	@level{@0{@resourceWhitelist = MetallicOre}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseSubstrate
	@displayName = Partitioned Warehouse - Substrate
	@level{@0{@resourceWhitelist = Substrate}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseExoticMinerals
	@displayName = Partitioned Warehouse - ExoticMinerals
	@level{@0{@resourceWhitelist = ExoticMinerals}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseGypsum
	@displayName = Partitioned Warehouse - Gypsum
	@level{@0{@resourceWhitelist = Gypsum}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseHydrates
	@displayName = Partitioned Warehouse - Hydrates
	@level{@0{@resourceWhitelist = Hydrates}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseMinerals
	@displayName = Partitioned Warehouse - Minerals
	@level{@0{@resourceWhitelist = Minerals}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseRareMetals
	@displayName = Partitioned Warehouse - RareMetals
	@level{@0{@resourceWhitelist = RareMetals}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseRock
	@displayName = Partitioned Warehouse - Rock
	@level{@0{@resourceWhitelist = Rock}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseSilicates
	@displayName = Partitioned Warehouse - Silicates
	@level{@0{@resourceWhitelist = Silicates}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseUraninite
	@displayName = Partitioned Warehouse - Uraninite
	@level{@0{@resourceWhitelist = Uraninite}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseSpodumene
	@displayName = Partitioned Warehouse - Spodumene
	@level{@0{@resourceWhitelist = Spodumene}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseMonazite
	@displayName = Partitioned Warehouse - Monazite
	@level{@0{@resourceWhitelist = Monazite}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseRegolith
	@displayName = Partitioned Warehouse - Regolith
	@level{@0{@resourceWhitelist = Regolith}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseEnrichedUranium
	@displayName = Partitioned Warehouse - EnrichedUranium
	@level{@0{@resourceWhitelist = EnrichedUranium}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseDepletedUranium
	@displayName = Partitioned Warehouse - DepletedUranium
	@level{@0{@resourceWhitelist = DepletedUranium}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseLithium
	@displayName = Partitioned Warehouse - Lithium
	@level{@0{@resourceWhitelist = Lithium}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseCarbon
	@displayName = Partitioned Warehouse - Carbon
	@level{@0{@resourceWhitelist = Carbon}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[CommunityResourcePack]
{
	@name = KCIPPartitionedWarehouseFertilizer
	@displayName = Partitioned Warehouse - Fertilizer
	@level{@0{@resourceWhitelist = Fertilizer}}
}
// MKS
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseMaterialKits
	@displayName = Partitioned Warehouse - MaterialKits
	@level{@0{@resourceWhitelist = MaterialKits}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseSpecializedParts
	@displayName = Partitioned Warehouse - SpecializedParts
	@level{@0{@resourceWhitelist = SpecializedParts}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseMachinery
	@displayName = Partitioned Warehouse - Machinery
	@level{@0{@resourceWhitelist = Machinery}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseRecyclables
	@displayName = Partitioned Warehouse - Recyclables
	@level{@0{@resourceWhitelist = Recyclables}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseSupplies
	@displayName = Partitioned Warehouse - Supplies
	@level{@0{@resourceWhitelist = Supplies}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseDirt
	@displayName = Partitioned Warehouse - Dirt
	@level{@0{@resourceWhitelist = Dirt}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseOrganics
	@displayName = Partitioned Warehouse - Organics
	@level{@0{@resourceWhitelist = Organics}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[KolonyTools]
{
	@name = KCIPPartitionedWarehouseColonySupplies
	@displayName = Partitioned Warehouse - ColonySupplies
	@level{@0{@resourceWhitelist = ColonySupplies}}
}
// Pathfinder
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[Pathfinder]
{
	@name = KCIPPartitionedWarehouseEquipment
	@displayName = Partitioned Warehouse - Equipment
	@level{@0{@resourceWhitelist = Equipment}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[Pathfinder]
{
	@name = KCIPPartitionedWarehouseKonkrete
	@displayName = Partitioned Warehouse - Konkrete
	@level{@0{@resourceWhitelist = Konkrete}}
}
// FFT
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[FarFutureTechnologies]
{
	@name = KCIPPartitionedWarehouseFissionParticles
	@displayName = Partitioned Warehouse - FissionParticles
	@level{@0{@resourceWhitelist = FissionParticles}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[FarFutureTechnologies]
{
	@name = KCIPPartitionedWarehouseFissionPellets
	@displayName = Partitioned Warehouse - FissionPellets
	@level{@0{@resourceWhitelist = FissionPellets}}
}
+KCFacilityConfig[KCIPPartitionedWarehouseOre]:NEEDS[FarFutureTechnologies]
{
	@name = KCIPPartitionedWarehouseAntimatter
	@displayName = Partitioned Warehouse - Antimatter
	@level{@0{
		@resourceWhitelist = Antimatter
		%ECperSecond = 250  // Antimatter storage requires containment, sadly can't blow things up in KC
	}}
}