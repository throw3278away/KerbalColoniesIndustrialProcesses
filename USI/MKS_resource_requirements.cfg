// MKS with EL uses MaterialKits and SpecializedParts to build stuff
// Additionally, many MKS buildings requires Machinery to operate, so it will be added to requirements
// This patch will put all KCFacility in a similar line
@KCFacilityConfig[*]:NEEDS[KerbalColonies,KolonyTools]:LAST[zKCIP]
{
	@level
	{
		@*:HAS[@resources]
		{
			@resources:HAS[#RocketParts,!#Ore]
			{
				%SpecializedParts = #$RocketParts$
				@SpecializedParts *= 10
				%MaterialKits = #$RocketParts$
				@MaterialKits *= 180
				%Machinery = #$RocketParts$
				@Machinery *= 30
			}
			@resources:HAS[!#RocketParts,#Ore]
			{
				%MaterialKits += #$Ore$
				@MaterialKits *= 180
			}
			@resources:HAS[#RocketParts,#Ore]
			{
				%SpecializedParts = #$RocketParts$
				@SpecializedParts *= 10
				%MaterialKits = #$RocketParts$
				@MaterialKits += #$Ore$
				@MaterialKits *= 180
				%Machinery = #$RocketParts$
				@Machinery *= 30
			}
			@resources
			{
				!RocketParts = 0
				!Ore = 0
			}
		}
	}
}
// Reduce the amount of resources required for CAB,
// as the scaling would get crazy requiring 900k MaterialKits and 150k Machinery
// This patch reduces it to 90k MaterialKits, 50k SpecializedParts, and 15k Machinery
@KCFacilityConfig[*]:HAS[#type[KC_CAB_Facility]]:NEEDS[KerbalColonies,KolonyTools]:LAST[zzKCIP]
{
	@level
	{
		@*:HAS[@resources]
		{
			@resources
			{
				@MaterialKits *= 0.1
				@Machinery *= 0.1
			}
		}
	}
}
// Remove Machinery from lauchpads and airstrips
@KCFacilityConfig[*]:HAS[#type[KCLaunchpadFacility]]:NEEDS[KerbalColonies,KolonyTools]:LAST[zzKCIP]
{
	@level
	{
		@*:HAS[@resources]
		{
			@resources:HAS[#Machinery]
			{
				!Machinery = 0
			}
		}
	}
}
// Changes resources for vessel building
@KCFacilityConfig[*]:HAS[#type[KCProductionFacility]]:NEEDS[KerbalColonies,KolonyTools]:LAST[zKCIP]
{
	@level
	{
		@*:HAS[@vesselResourceCost]
		{
			@vesselResourceCost:HAS[#RocketParts]
			{
				%MaterialKits = #$RocketParts$
				@MaterialKits *= 0.8
				%SpecializedParts = #$RocketParts$
				@SpecializedParts *= 0.2
				!RocketParts = 0
			}
			@vesselResourceCost:HAS[#Ore]
			{
				!Ore = 0
			}
		}
	}
}